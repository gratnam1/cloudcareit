<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm py-3">
  <div class="container">
    <a class="navbar-brand fw-bold text-dark d-flex align-items-center" routerLink="/">
      <svg width="24" height="24" viewBox="0 0 100 100" class="me-2">
        <title>CtrlShift IT Logo</title>
        <rect x="10" y="10" width="80" height="80" rx="15" fill="none" stroke="#6366f1" stroke-width="10"/>
        <path d="M50 30 L35 55 H42 V75 H58 V55 H70 L50 30 Z" fill="#6366f1"/>
      </svg>
      CTRL<span class="text-primary">SHIFT</span>
    </a>
    <button
      class="navbar-toggler"
      type="button"
      [attr.aria-expanded]="menuOpen"
      aria-controls="navbarNav"
      aria-label="Toggle navigation"
      (click)="toggleMenu()"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-collapse collapse" id="navbarNav" [class.show]="menuOpen">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item dropdown" [class.show]="locationsOpen">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            [attr.aria-expanded]="locationsOpen"
            (click)="toggleLocations($event)"
          >
            Locations
          </a>
          <ul class="dropdown-menu border-0 shadow" [class.show]="locationsOpen">
            <li><a class="dropdown-item" routerLink="/managed-it-services-vaughan" (click)="closeNavMenus()">Vaughan</a></li>
            <li><a class="dropdown-item" routerLink="/managed-it-services-toronto" (click)="closeNavMenus()">Toronto</a></li>
            <li><a class="dropdown-item" routerLink="/managed-it-services-mississauga" (click)="closeNavMenus()">Mississauga</a></li>
            <li><a class="dropdown-item" routerLink="/managed-it-services-thornhill" (click)="closeNavMenus()">Thornhill</a></li>
            <li><a class="dropdown-item" routerLink="/managed-it-services-richmond-hill" (click)="closeNavMenus()">Richmond Hill</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link px-3" routerLink="/" fragment="services" (click)="closeNavMenus()">Services</a></li>
        <li class="nav-item ms-lg-3">
          <a class="btn btn-dark rounded-pill px-4 shadow-sm" routerLink="/" fragment="consultation" (click)="closeNavMenus()">Free Consultation</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<router-outlet></router-outlet>

<footer class="site-footer border-top mt-auto">
  <div class="container">
    <div class="row g-3 align-items-center">
      <div class="col-lg-6">
        <p class="site-footer-copy mb-0">Â© 2026 CtrlShift IT Services. High-Performance IT Management for Ontario.</p>
      </div>
      <div class="col-lg-6">
        <div class="site-footer-links-wrap">
          <h3 class="site-footer-heading mb-2">Service Areas</h3>
          <div class="site-footer-links">
            <a class="site-footer-link" routerLink="/managed-it-services-vaughan">Managed IT Services Vaughan</a>
            <a class="site-footer-link" routerLink="/managed-it-services-toronto">Managed IT Services Toronto</a>
            <a class="site-footer-link" routerLink="/managed-it-services-mississauga">Managed IT Services Mississauga</a>
            <a class="site-footer-link" routerLink="/managed-it-services-thornhill">Managed IT Services Thornhill</a>
            <a class="site-footer-link" routerLink="/managed-it-services-richmond-hill">Managed IT Services Richmond Hill</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<div id="ai-chat-bubble" (click)="toggleChat()" class="bg-primary text-white rounded-circle shadow-lg d-flex align-items-center justify-content-center" style="position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; cursor: pointer; z-index: 9999;">
  <i class="bi bi-robot fs-2"></i>
</div>

<div *ngIf="chatVisible" class="card shadow-lg border-0 rounded-4" style="position: fixed; bottom: 100px; right: 30px; width: 350px; z-index: 9999; overflow: hidden;">
  <div class="card-body bg-light scroll-y" style="height: 300px; overflow-y: auto;">
    <div *ngFor="let msg of messages" [ngClass]="{'text-end': msg.isUser}" class="mb-3">
      <div [ngClass]="msg.isUser ? 'bg-primary text-white' : 'bg-white text-dark shadow-sm'" class="p-2 rounded-3 d-inline-block" style="max-width: 80%;">
        {{ msg.text }}
      </div>
    </div>
  </div>
  <div class="card-footer bg-white p-3">
    <div class="input-group">
      <input type="text" [(ngModel)]="chatInput" (keyup.enter)="sendMessage()" class="form-control border-0 bg-light" placeholder="Ask...">
      <button class="btn btn-primary" (click)="sendMessage()"><i class="bi bi-send-fill"></i></button>
    </div>
  </div>
</div>
